import{c as f,j as e,d as p,p as h,e as g,f as A,u as B,y as C,L as w,C as N,s as L,o as S,h as P,g as F,k as y,W as R}from"./index-c796936d.js";import{B as W}from"./Button-6feb0bde.js";import{I as k}from"./InputNumber-df37bb43.js";import{P as G,p as M}from"./Product-0aa63e92.js";function z({queryConfig:t}){const r=f(),{rating_filter:s}=t,x=l=>{r({pathname:h.home,search:g({...t,rating_filter:String(l)}).toString()})};return e.jsx("ul",{className:"my-3",children:Array(5).fill(1).map((l,n)=>{const o=Number(s)===5-n;return e.jsx("li",{className:"py-1 pl-2 cursor-pointer",children:e.jsxs("div",{className:p("flex items-center text-sm pl-3 w-44 py-1",{"bg-gray-300/80 rounded-xl":o}),onClick:()=>x(5-n),tabIndex:0,role:"button",children:[Array(5).fill(0).map((u,j)=>j<5-n?e.jsxs("svg",{viewBox:"0 0 9.5 8",className:"w-4 h-4 mr-1",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"ratingStarGradient",x1:"50%",x2:"50%",y1:"0%",y2:"100%",children:[e.jsx("stop",{offset:0,stopColor:"#ffca11"}),e.jsx("stop",{offset:1,stopColor:"#ffad27"})]}),e.jsx("polygon",{id:"ratingStar",points:"14.910357 6.35294118 12.4209136 7.66171903 12.896355 4.88968305 10.8823529 2.92651626 13.6656353 2.52208166 14.910357 0 16.1550787 2.52208166 18.9383611 2.92651626 16.924359 4.88968305 17.3998004 7.66171903"})]}),e.jsx("g",{fill:"url(#ratingStarGradient)",fillRule:"evenodd",stroke:"none",strokeWidth:1,children:e.jsx("g",{transform:"translate(-876 -1270)",children:e.jsx("g",{transform:"translate(155 992)",children:e.jsx("g",{transform:"translate(600 29)",children:e.jsx("g",{transform:"translate(10 239)",children:e.jsx("g",{transform:"translate(101 10)",children:e.jsx("use",{stroke:"#ffa727",strokeWidth:".5",xlinkHref:"#ratingStar"})})})})})})})]},n):e.jsxs("svg",{viewBox:"0 0 30 30",className:"w-4 h-4 mr-1",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"star__hollow",x1:"50%",x2:"50%",y1:"0%",y2:"99.0177926%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FFD211"}),e.jsx("stop",{offset:"100%",stopColor:"#FFAD27"})]})}),e.jsx("path",{fill:"none",fillRule:"evenodd",stroke:"url(#star__hollow)",strokeWidth:2,d:"M23.226809 28.390899l-1.543364-9.5505903 6.600997-6.8291523-9.116272-1.4059447-4.01304-8.63019038-4.013041 8.63019038-9.116271 1.4059447 6.600997 6.8291523-1.543364 9.5505903 8.071679-4.5038874 8.071679 4.5038874z"})]})),n!==0&&e.jsx("span",{className:"ml-3",children:"trở lên"})]})},n)})})}const D=L.pick(["price_min","price_max"]);function T({categories:t,queryConfig:r}){var b;const{t:s}=A(),{category:x}=r,l=f(),{control:n,handleSubmit:o,trigger:u,formState:{errors:j}}=B({defaultValues:{price_max:"",price_min:""},resolver:C(D),shouldFocusError:!1}),a=o(c=>{l({pathname:h.home,search:g({...r,price_max:c.price_max,price_min:c.price_min}).toString()})}),i=()=>{l({pathname:h.home,search:g(S(r,["category","price_max","price_min","rating_filter"])).toString()})};return e.jsxs("div",{className:"py-4",children:[e.jsxs(w,{to:h.home,className:p("flex items-center font-bold",{"text-orange-500":!x}),children:[e.jsx("svg",{viewBox:"0 0 12 10",className:"w-3 h-4 mr-3 fill-current",children:e.jsx("g",{fillRule:"evenodd",stroke:"none",strokeWidth:1,children:e.jsx("g",{transform:"translate(-373 -208)",children:e.jsx("g",{transform:"translate(155 191)",children:e.jsxs("g",{transform:"translate(218 17)",children:[e.jsx("path",{d:"m0 2h2v-2h-2zm4 0h7.1519633v-2h-7.1519633z"}),e.jsx("path",{d:"m0 6h2v-2h-2zm4 0h7.1519633v-2h-7.1519633z"}),e.jsx("path",{d:"m0 10h2v-2h-2zm4 0h7.1519633v-2h-7.1519633z"})]})})})})}),s("all categories")]}),e.jsx("div",{className:"bg-gray-300 h-[1px] my-4"}),e.jsx("ul",{children:t.map(c=>{const v=x===c._id;return e.jsx("li",{className:"py-2 pl-2",children:e.jsxs(w,{to:{pathname:h.home,search:g({...r,category:c._id}).toString()},className:p("relative px-2",{"font-semibold text-orange-600":v}),children:[v&&e.jsx("svg",{viewBox:"0 0 4 7",className:p("h-2 w-2 fill-orange-500 absolute top-1 left-[-10px]"),children:e.jsx("polygon",{points:"4 3.5 0 0 0 7"})}),c.name]})},c._id)})}),e.jsxs(w,{to:h.home,className:"flex items-center font-bold mt-4 uppercase",children:[e.jsx("svg",{"enable-background":"new 0 0 15 15",viewBox:"0 0 15 15",x:"0",y:"0",className:"w-3 h-3 fill-current stroke-current mr-3",children:e.jsx("g",{children:e.jsx("polyline",{fill:"none",points:"5.5 13.2 5.5 5.8 1.5 1.2 13.5 1.2 9.5 5.8 9.5 10.2","stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":"10"})})}),s("filter search")]}),e.jsx("div",{className:"bg-gray-300 h-[1px] my-4"}),e.jsxs("div",{className:"my-5",children:[e.jsx("div",{children:s("price-range")}),e.jsxs("form",{className:"mt-2 ",onSubmit:a,children:[e.jsxs("div",{className:"flex items-start h-12",children:[e.jsx(N,{control:n,name:"price_min",render:({field:c})=>e.jsx(k,{placeholder:"Từ",className:"grow-1",classNameInput:"px-1 py-1 text-sm w-full border border-gray-300 rounded-sm focus:border-gray-500 outline-none",...c,onChange:v=>{c.onChange(v),u("price_max")}})}),e.jsx("div",{className:"mx-2 mt-1 shrink-0 text-gray-400",children:"-"}),e.jsx(N,{control:n,name:"price_max",render:({field:c})=>e.jsx(k,{placeholder:"Đến",className:"grow-1",classNameInput:"px-1 py-1 text-sm w-full border border-gray-300 rounded-sm focus:border-gray-500 outline-none",...c,onChange:v=>{c.onChange(v),u("price_min")}})})]}),e.jsx("div",{className:"text-red-600 text-center h-5",children:(b=j.price_min)==null?void 0:b.message}),e.jsx(W,{type:"submit",className:" w-full text-center bg-orange-600 py-2 px-2 text-white  hover:bg-orange-600/80",children:s("-apply")})]})]}),e.jsx("div",{className:"bg-gray-300 h-[1px] my-4"}),e.jsx("div",{className:"text-sm",children:s("-Evaluate")}),e.jsx(z,{queryConfig:r}),e.jsx("div",{className:"bg-gray-300 h-[1px] my-4"}),e.jsx("button",{onClick:i,className:" w-full text-center bg-orange-600 py-2 px-2 text-white hover:bg-orange-600/80",children:s("delete all")})]})}const d={createdAt:"createdAt",view:"view",sold:"sold",price:"price"},_={asc:"asc",desc:"desc"};function E({queryConfig:t,pageSize:r}){const{sort_by:s=d.createdAt,order:x}=t,l=Number(t.page),n=f(),o=a=>s===a,u=a=>{n({pathname:h.home,search:g(S({...t,sort_by:a},["order"])).toString()})},j=a=>{n({pathname:h.home,search:g({...t,sort_by:d.price,order:a}).toString()})};return e.jsx("div",{className:"bg-gray-300/40 py-4 px-3",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center flex-wrap gap-2",children:[e.jsx("div",{children:"Sắp xếp theo"}),e.jsx("button",{className:p("rounded-sm bg-orange-600 w-20 h-8 text-sm hover:cursor-pointer",{" bg-orange-600 text-white hover:bg-orange-600/80":o(d.view),"bg-white text-black hover:bg-slate-100":!o(d.view)}),onClick:()=>u(d.view),children:"Phổ biến"}),e.jsx("button",{className:p("rounded-sm bg-orange-600 w-20 h-8 text-sm hover:cursor-pointer",{" bg-orange-600 text-white hover:bg-orange-600/80":o(d.createdAt),"bg-white text-black hover:bg-slate-100":!o(d.createdAt)}),onClick:()=>u(d.createdAt),children:"Mới nhất"}),e.jsx("button",{className:p("rounded-sm bg-orange-600 w-20 h-8 text-sm hover:cursor-pointer",{" bg-orange-600 text-white hover:bg-orange-600/80":o(d.sold),"bg-white text-black hover:bg-slate-100":!o(d.sold)}),onClick:()=>u(d.sold),children:"Bán chạy"}),e.jsxs("select",{className:p(" w-40 h-8 text-sm hover:cursor-pointer outline-none",{" bg-orange-600 text-white hover:bg-orange-600/80":o(d.price),"bg-white text-black hover:bg-slate-100":!o(d.price)}),value:x||"",onChange:a=>j(a.target.value),children:[e.jsx("option",{defaultValue:"",disabled:!0,className:"bg-white text-black",children:"Giá"}),e.jsx("option",{value:_.asc,className:"bg-white text-black",children:"Giá: Thấp đến Cao"}),e.jsx("option",{value:_.desc,className:"bg-white text-black",children:"Giá: Cao đến Thấp"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-orange-500",children:l}),e.jsxs("span",{children:["/",r]})]}),e.jsxs("div",{className:"ml-2 flex",children:[l===1?e.jsx("span",{className:"w-9 h-8 flex justify-center items-center cursor-not-allowed rounded-tl-sm bg-white/60 shadow",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-3 h-3",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})})}):e.jsx(w,{to:{pathname:h.home,search:g({...t,page:(l-1).toString()}).toString()},className:"w-9 h-8 flex justify-center items-center cursor-pointer rounded-tl-sm bg-white shadow",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-3 h-3",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})})}),l===r?e.jsx("span",{className:"w-9 h-8 flex justify-center items-center cursor-not-allowed rounded-tl-sm bg-white/60 shadow",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-3 h-3",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})})}):e.jsx(w,{to:{pathname:h.home,search:g({...t,page:(l+1).toString()}).toString()},className:"w-9 h-8 flex justify-center items-center cursor-pointer rounded-tl-sm bg-white shadow",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-3 h-3",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})})})]})]})]})})}const m=2;function I({queryConfig:t,pageSize:r}){const s=Number(t.page),x=()=>{let l=!1,n=!1;const o=j=>{if(!n)return n=!0,e.jsx("span",{className:p("bg-white rounded px-3 py-2 shadow-sm mx-2 cursor-pointer border",{}),children:"..."},j)},u=j=>{if(!l)return l=!0,e.jsx("span",{className:p("bg-white rounded px-3 py-2 shadow-sm mx-2 cursor-pointer border",{}),children:"..."},j)};return Array(r).fill(0).map((j,a)=>{const i=a+1;if(s<=m*2+1&&i>s+m&&i<r-m+1)return u(a);if(s>m*2+1&&s<r-m*2){if(i<s-m&&i>m)return o(a);if(i>s+m&&i<r-m+1)return u(a)}else if(s>=r-m*2&&i>m&&i<s-m)return o(a);return e.jsx(w,{to:{pathname:h.home,search:g({...t,page:i.toString()}).toString()},className:p("bg-white rounded px-3 py-2 shadow-sm mx-2 cursor-pointer border",{"border-cyan-500":i===s,"border-transparent":i!==s}),children:i},a)})};return e.jsxs("div",{className:"flex mt-6 justify-center flex-wrap",children:[s===1?e.jsx("span",{className:"bg-white/40 rounded px-3 py-2 mx-2 shadow-sm cursor-not-allowed",children:"Prev"}):e.jsx(w,{to:{pathname:h.home,search:g({...t,page:(s-1).toString()}).toString()},className:"bg-white rounded px-3 py-2 shadow-sm mx-2 cursor-pointer",children:"Prev"}),x(),s===r?e.jsx("span",{className:"bg-white/40  rounded px-3 py-2 shadow-sm mx-2 cursor-not-allowed",children:"Next"}):e.jsx(w,{to:{pathname:h.home,search:g({...t,page:(s+1).toString()}).toString()},className:"bg-white rounded px-3 py-2 shadow-sm mx-2 cursor-pointer",children:"Next"})]})}const K="categories",Q={getCategories(){return P.get(K)}};function $(){const t=F(),{data:r}=y({queryKey:["Products",t],queryFn:()=>M.getProducts(t),keepPreviousData:!0,staleTime:3*60*1e3}),{data:s}=y({queryKey:["Categories"],queryFn:()=>Q.getCategories()});return e.jsxs("div",{className:"bg-gray-200 py-6",children:[e.jsxs(R,{children:[e.jsx("title",{children:"Sản phẩm | Shopee Clone"}),e.jsx("meta",{name:"description",content:"chi tiết sản phẩm của dự án shopee clone"})]}),e.jsx("div",{className:"container",children:r&&e.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[e.jsx("div",{className:"col-span-3",children:e.jsx(T,{categories:(s==null?void 0:s.data.data)||[],queryConfig:t})}),e.jsxs("div",{className:"col-span-9",children:[e.jsx(E,{queryConfig:t,pageSize:r.data.data.pagination.page_size}),e.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3 ",children:r&&r.data.data.products.map(x=>e.jsx("div",{className:"col-span-1",children:e.jsx(G,{product:x})},x._id))}),e.jsx(I,{queryConfig:t,pageSize:r.data.data.pagination.page_size})]})]})})]})}export{$ as default};
